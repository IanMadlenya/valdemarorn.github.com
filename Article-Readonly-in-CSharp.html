<html>
<head>
    <link href="Templates/Styles.css" rel="stylesheet" type="text/css">
    <title>Valdemar Erlingsson - Just how read-only is &quot;readonly&quot; in C#?</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Parallax Header -->
    <script type="text/javascript">
        window.addEventListener("scroll", function (a, b) {
            var header = document.getElementById("header");
            var headerHeight = header.clientHeight;
            var scr = document.body.scrollTop;
            var ratio = scr / headerHeight;
            var minPos = 0.2;
            var newPos = minPos + ratio;
            if (newPos > 1) newPos = 1;
            var val = (newPos * 100) + '%';
            header.style["background-position-y"] = val;
            header.style["top"] = (0.1 * scr) + "px";
        });
    </script>
</head>

<body>
    <div id="header">
        <div id="header-text">
            
        </div>
    </div>

    <div id="header-menu">
        <ul>
            <li><a href="Index.html">About</a></li>
            <li><a href="Article-Index.html">Articles</a></li>
            <li><a href="Projects.html">Projects</a></li>
        </ul>
    </div>

    <div class="content-main">
            <h1>Just how read-only is &quot;readonly&quot; in C#?</h1>
        
            <div class="date-container">Jul 04. 2013</div>

        <div class="article-main">
            <p>Have you ever stopped to think how the readonly keyword works under the hood? Did you realize that it's only syntactic sugar to stop you from accidentally overwriting an invariant constant?</p>

<p>Don't believe me? Try it yourself:</p>

<pre><code>class Program
{
    public readonly int Val;

    public Program()
    {
        Val = 42;
    }

    static void Main(string[] args)
    {
        var p = new Program();
        var now = p.Val;

        // This is a compile-time error
        p.Val = 45; // try commenting out this line, see what happens...

        // But this works just fine
        p.GetType().GetField("Val").SetValue(p, 43);
        var after = p.Val;
        Console.WriteLine("Val is {0}", p.Val);
    }
}
</code></pre>

        </div>

    </div>

    <div class="footer">
        <div>
            <p>Valdemar Erlingsson</p>
            <ul>
                    <li><a href="Index.html">About</a></li>
                    <li><a href="Article-Index.html">Articles</a></li>
                    <li><a href="Projects.html">Projects</a></li>
            </ul>
        </div>
    </div>
</body>
</html>