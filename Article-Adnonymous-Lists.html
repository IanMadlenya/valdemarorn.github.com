<html>
<head>
    <link href="Templates/Styles.css" rel="stylesheet" type="text/css">
    <title>Valdemar Erlingsson - Anonymous Lists in C#</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">

    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- Parallax Header -->
    <script type="text/javascript">
        window.addEventListener("scroll", function (a, b) {
            var header = document.getElementById("header");
            var headerHeight = header.clientHeight;
            var scr = document.body.scrollTop;
            var ratio = scr / headerHeight;
            var minPos = 0.2;
            var newPos = minPos + ratio;
            if (newPos > 1) newPos = 1;
            var val = (newPos * 100) + '%';
            header.style["background-position-y"] = val;
            header.style["top"] = (0.1 * scr) + "px";
        });
    </script>
</head>

<body>
    <div id="header">
        <div id="header-text">
            
        </div>
    </div>

    <div id="header-menu">
        <ul>
            <li><a href="index.html">About</a></li>
            <li><a href="Article-Index.html">Articles</a></li>
            <li><a href="Projects.html">Code</a></li>
            <li><a href="AudioProjects.html">Audio Projects</a></li>
        </ul>
    </div>

    <div class="content-main">
            <h1>Anonymous Lists in C#</h1>
        
            <div class="date-container">Oct 10. 2011</div>

        <div class="article-main">
            <p>This code is from a Gist I wrote when I was starting to use C#. It was one of those things that brought a "woah, dude" moment. Of course, you can actually implement this quite trivially with LINQ, but I didn't know that at the time!</p>

<pre><code>class AnonList
{

    /// &lt;summary&gt;
    /// Creates a list of type T using a prototype object. Prototype can be any object, including an anonymous type. 
    /// &lt;/summary&gt;
    /// &lt;typeparam name="T"&gt;&lt;/typeparam&gt;
    /// &lt;param name="prototype"&gt;The prototype object, of which a List of the same type is returned&lt;/param&gt;
    /// &lt;returns&gt;A new empty List of the same type as prototype&lt;/returns&gt;
    public static List&lt;T&gt; CreateAnonList&lt;T&gt;(T prototype)
    {
        return new List&lt;T&gt;();
    }

}
</code></pre>

<p>To use this:</p>

<pre><code>var k = new { A = 23, B = "Foo" };
var list1 = AnonList.CreateAnonList(k);

// of course, with a bit of LINQ, you can just do:
// (although this also places the item in the list)
var list2 = new [] { k }.ToList();

list1.Dump();
list2.Dump();
</code></pre>

        </div>

    </div>

    <div class="footer">
        <div>
            <p>Valdemar Erlingsson</p>
            <ul>
                    <li><a href="index.html">About</a></li>
                    <li><a href="Article-Index.html">Articles</a></li>
                    <li><a href="Projects.html">Code</a></li>
                    <li><a href="AudioProjects.html">Audio Projects</a></li>
            </ul>
        </div>
    </div>
</body>
</html>